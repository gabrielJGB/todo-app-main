<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css2?family=Josefin+Sans:ital,wght@1,300&display=swap" rel="stylesheet">

  <link rel="icon" type="image/png" sizes="32x32" href="./images/favicon-32x32.png">

  <title>To-do app</title>

  <style>
    * {
      margin: 0;
      padding: 0;
    }

    body {
      font-family: 'Josefin Sans', sans-serif;
      background-image: url("images/bg-desktop-light.jpg");
      width: 100%;
      height: 270px;
      background-repeat: no-repeat;
      overflow-y: scroll;

    }

    .title {
      font-size: 40px;
      font-weight: bold;
    }

    .item-container {


      display: flex;
      flex-direction: column;
      margin: 60px auto 0 auto;
      width: 37%;
      justify-content: center;

    }

    .item-list {
      box-shadow: 0 0 25px rgba(0, 0, 0, 0.199);
    }

    .item,
    .input-item {
      display: flex;
      align-items: center;
      background-color: white;
      border-bottom: solid 1px #4c4c4c;
      padding: 0 15px;

    }

    .item:first-child {
      border-top-right-radius: 5px;
      border-top-left-radius: 5px;
      border-bottom: solid 0px;
    }

    .item:last-child {
      border-bottom-right-radius: 5px;
      border-bottom-left-radius: 5px;
      border-bottom: solid 0px;
    }

    .input-item {
      box-shadow: 0 0 25px rgba(0, 0, 0, 0.199);
      margin-bottom: 25px;
      border-radius: 5px;
      padding: 0 15px 0 0;

    }

    .input-item input {
      padding: 15px 15px 15px 0;
    }

    .item-text {
      width: 100%;
      padding: 20px 10px 20px 20px;
      border: 0;
      font-size: 17px;
      margin-left: 20px;
    }

    .item-text:focus {
      outline: 0;
    }

    /* The container */
    .container {
      display: block;
      position: relative;
      cursor: pointer;
      font-size: 18px;
      -webkit-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      user-select: none;
    }

    /* Hide the browser's default checkbox */
    .container input {
      position: relative;
      opacity: 0;
      cursor: pointer;
      height: 0;
      width: 0;
    }

    /* Create a custom checkbox */
    .checkmark {
      position: absolute;
      top: 0;
      left: 0;
      height: 25px;
      width: 25px;
      background-color: rgb(209, 209, 209);
    }

    /* When the checkbox is checked, add a blue background */
    .container input:checked~.checkmark {
      background-color: rgb(0, 140, 255);
      transition: all 0.2s;
    }

    /* Create the checkmark/indicator (hidden when not checked) */
    .checkmark:after {
      content: "";
      position: absolute;
      display: none;
    }

    /* Show the checkmark when checked */
    .container input:checked~.checkmark:after {
      display: block;
    }

    /* Style the checkmark/indicator */
    .container .checkmark:after {
      left: 9px;
      top: 5px;
      width: 5px;
      height: 10px;
      border: solid white;
      border-width: 0 3px 3px 0;
      -webkit-transform: rotate(45deg);
      -ms-transform: rotate(45deg);
      transform: rotate(45deg);
    }

    .add-button {
      border: 0;
      padding: 10px 12px;
      cursor: pointer;
      border-radius: 5px;
      color: rgb(224, 224, 224);
      background-color: #101010;
      outline: none;
    }

    .add-button:hover {
      background-color: rgb(51, 51, 51);
    }

    .delete-button {
      border: 0;
      cursor: pointer;
      font-size: 35px;
      color: rgb(211, 211, 211);
      background-color: transparent;
      outline: none;
    }

    .delete-button:hover {
      color: rgb(255, 0, 0);


    }

    .completed-item {
      text-decoration: line-through;
      color: rgb(109, 109, 109);
    }

    .screen-mode-button {

      width: 34px;
      font-size: 30px;
      background-color: transparent;
      border-radius: 7px;
      border: 0;
      cursor: pointer;
      outline: none
    }

    .header {
      display: flex;
      flex-direction: row;
      justify-content: space-between;
      margin-bottom: 20px
    }

    .button {
      padding: 7px;
      border: 0;
      background-color: white;
      outline: none;
      font-size: 16px;
      cursor: pointer;
      color: rgb(59, 59, 59);
    }

    .options {
      display: flex;
      flex-direction: row;
      align-items: center;
      justify-content: space-evenly;
      background-color: white;
      padding: 10px;
      margin-bottom: 25px;
      border-radius: 5px;
      box-shadow: 0 0 25px rgba(0, 0, 0, 0.199);
    }



    .footer {
      width: 100%;
      height: 500px;
    }

    .option-box {
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      color: white;
      font-family: sans-serif;
      cursor: pointer;
      
      border-radius: 5px;

    }

    .option-box:not(:last-child) {
      width: 85px;
      /* border: solid 1px rgba(255, 255, 255, 0.76); */
    }

    .option-text{
      padding:7px 15px;
      border-radius:5px;
      margin-bottom:5px;
      border:solid 1px rgba(218, 218, 218, 0);
    }

    .clear-completed {
      text-align: center;
    }


    @media all and (max-width: 800px) {
      .item-container {
        width: 95%;
        margin: 70px auto;
      }

      .header {
        justify-content: space-evenly;
      }

      .delete-button:hover {
        color: rgb(211, 211, 211);
      }

      .add-button:hover {
        background-color: #101010;
      }

    }
  </style>
</head>

<body>

  <div class="item-container">

    <div class="header">
      <p class="title">TO-DO</p>
      <button class="screen-mode-button" type="button">☾</button>
    </div>

    <div class="input-item ">
      <input class="item-text" placeholder="Add an item" type="text">
      <button class="add-button" type="button">Add</button>
    </div>

    <div class="options">

      <div class="option-box show-all">
        <div class="option-text">All</div>
        <div class="all-count">0</div>
      </div>

      <div class="option-box show-active">
        <div class="option-text">Active</div>
        <div class="all-count">0</div>
      </div>

      <div class="option-box show-completed">
        <div class="option-text">Completed</div>
        <div class="all-count">0</div>
      </div>


      <div class="option-box clear-completed">
        <div>Clear <br>completed</div>
      </div>

    </div>

    <div class="item-list">

    </div>

  </div>
  <div class="footer">

  </div>

  <script>

    let itemListContainer = document.querySelector('.item-list');
    let item = document.querySelector('.item');
    let inputTask = document.querySelector('.input-item');
    let title = document.querySelector('.title');
    let itemText = document.querySelector('.item-text');
    let addButton = document.querySelector('.add-button');
    let screenModeButton = document.querySelector('.screen-mode-button');
    let options = document.querySelector('.options');
    let optionText = document.querySelectorAll('.option-text');
    let body = document.querySelector('body');

    let itemsArray = [];

    let itemsCount = -1;
    let darkMode = true;

    addButton.addEventListener('click', addItem);
    screenModeButton.addEventListener('click', selectScreenMode);


    optionText.forEach(function (i) {
      i.addEventListener('click', optionPressed);
    });

    body.addEventListener('keypress', function (e) {
      if (e.key == 'Enter') {
        addItem();
      }
    });

    checkScreenMode(darkMode);

    function optionPressed(e) {
      let option = e.target.textContent;

      
      

      if (option == "All") {
        
        optionText[0].style.border = "solid 1px white";
        optionText[1].style.border = "solid 1px transparent";
        optionText[2].style.border = "solid 1px transparent";

        showAll();
      }
      else if (option === "Active") {
        optionText[1].style.border = "solid 1px white";
        optionText[0].style.border = "solid 1px transparent";
        optionText[2].style.border = "solid 1px transparent";
        
        showActive();
      }
      else if (option === "Completed") {
        optionText[0].style.border = "solid 1px transparent";
        optionText[1].style.border = "solid 1px transparent";
        optionText[2].style.border = "solid 1px white";
        
        showCompleted(); 
      }
      else if (option === "Clear completed") {
        clearCompleted();
      }

    }

    function showAll() {
      itemsArray.forEach(function (item) {
        item.style.display = "";
      })
    }

    function showActive() {
      let isChecked;
      showAll();
      itemsArray.forEach(function (item) {
        isChecked = item.children[0].children[0].checked;

        if (isChecked) {
          item.style.display = "none";
        }

      })
    }

    function showCompleted() {
      let isChecked;
      showAll();
      itemsArray.forEach(function (item) {
        isChecked = item.children[0].children[0].checked;

        if (!isChecked) {
          item.style.display = "none";
        }

      })

    }

    function clearCompleted() {
      let isChecked;
      let deleteIndex = [];

      for (let i = 0; i < itemsArray.length; i++) {
        isChecked = itemsArray[i].children[0].children[0].checked;

        if (isChecked) {
          deleteIndex[i] = i;
        }
      }

    }

    function addItem() {

      createItem();
      itemsArray[itemsCount].children[1].value = itemText.value;
      itemsArray[itemsCount].children[2].addEventListener('click', deleteItem);
      itemsArray[itemsCount].children[0].children[0].addEventListener('click', itemChecked);
      itemText.value = "";

      checkScreenMode(darkMode);

    }

    function checkScreenMode(darkMode) {

      if (darkMode) {
        screenModeButton.textContent = "☀";
        screenModeButton.style.color = "white";
        changeScreenMode("dark");
      }
      else {
        changeScreenMode("light");
      }
    }

    function selectScreenMode(e) {


      if (e.target.textContent == "☾") {
        e.target.textContent = "☀";
        e.target.style.color = "white";
        changeScreenMode("dark");

      }
      else if (e.target.textContent == "☀") {

        e.target.textContent = "☾";
        e.target.style.color = "black";
        changeScreenMode("light");


      }
    }

    function changeScreenMode(screenMode) {

      if (screenMode == "light") {
        darkMode = false;
        body.style['background-color'] = "white";
        body.style['background-image'] = 'url("/images/bg-desktop-light.jpg")';
        itemText.style['background-color'] = "white";
        itemText.color = "white";
        inputTask.children[0].style.color = "black";
        inputTask.style['background-color'] = "white";
        title.style.color = "black";

        // optionBox.forEach(function (k) {
        //   k.style['background-color'] = "white";
        //   k.style.color = "black"
        // })

        options.style['background-color'] = "white";


        itemsArray.forEach(function (i) {
          i.style['background-color'] = "white";
          i.style['background-color'] = "white";
          i.children[1].style['background-color'] = "white";
          i.children[1].style.color = "black";
          i.children[2].style['background-color'] = "white";
          i.style['border-bottom'] = "solid 1px rgb(214, 214, 214)";

        })

      }

      else if (screenMode == "dark") {
        darkMode = true;
        body.style['background-color'] = "#181824";
        body.style['background-image'] = 'url("/images/bg-desktop-dark.jpg")';
        inputTask.style['background-color'] = "#24273c";
        itemText.style['background-color'] = "#24273c";
        inputTask.children[0].style.color = "white";
        title.style.color = "white";

        // optionBox.forEach(function (k) {
        //   k.style['background-color'] = "#24273c";
        //   k.style.color = "white"
        // })


        options.style['background-color'] = "#24273c";

        itemsArray.forEach(function (i) {
          i.style['background-color'] = "#24273c";
          i.style['background-color'] = "#24273c";
          i.children[1].style['background-color'] = "#24273c";
          i.children[1].style.color = "white";
          i.children[2].style['background-color'] = "#24273c";
          i.style['border-bottom'] = "solid 1px #4c4c4c";

        })

      }

    }

    function itemChecked(e) {

      let itemChecked = e.target.parentNode.parentNode.children[0].children[0].checked;
      let itemContent = e.target.parentNode.parentNode.children[1];

      if (itemChecked == true) {
        itemContent.classList.add('completed-item');
      }
      else {
        itemContent.classList.remove('completed-item');
      }

    }

    function deleteItem(e) {

      let deleteIndex = itemsArray.indexOf(e.target.parentNode);

      itemListContainer.removeChild(itemsArray[deleteIndex]);

      if (deleteIndex > -1) {
        itemsArray.splice(deleteIndex, 1);
      }

      itemsCount--;
    }

    function createItem() {

      let item = document.createElement('DIV');
      let container = document.createElement('LABEL');
      let inputCheckbox = document.createElement('INPUT');
      let span = document.createElement('SPAN');
      let inputText = document.createElement('INPUT');
      let deleteButton = document.createElement('BUTTON');

      itemsCount++;

      item.className = "item";
      container.className = "container";
      inputCheckbox.className = "check-box";
      inputCheckbox.setAttribute("type", "checkbox")
      span.className = "checkmark";
      inputText.className = "item-text";
      inputText.setAttribute("type", "text");
      deleteButton.className = "delete-button";
      deleteButton.setAttribute("type", "button");
      deleteButton.textContent = "x";

      container.appendChild(inputCheckbox);
      container.appendChild(span);
      item.appendChild(container);
      item.appendChild(inputText);
      item.appendChild(deleteButton);
      itemListContainer.appendChild(item);

      itemsArray.push(item);

    }






  </script>
</body>

</html>